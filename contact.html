<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Contact — Eclaboucles</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="style.css">

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-YXD6JPZJWC"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  
  gtag('config', 'G-YXD6JPZJWC');
</script>

</head>
<body>

<nav>
  <a href="index.html">Accueil</a>
  <a href="marque.html">La Marque</a>
  <a href="collections.html">Collections</a>
  <a href="gallery.html">Gallery</a>
  <a href="contact.html">Contact</a>

  <!-- Onglet panier à droite -->
  <div id="nav-cart" style="float:right; margin-left: auto;">
    <a href="#" id="open-cart">Panier (<span id="nav-cart-count">0</span>)</a>
  </div>
</nav>

<section class="contact-section">
  <h2>Vous avez une question ?</h2>
  <p>Nous nous ferons un plaisir de vous répondre dans un délai de 24h.</p>

  <form class="contact-form" action="https://formspree.io/f/mnjbqlvd" method="POST">
  <label for="name">Nom</label>
  <input type="text" id="name" name="name" placeholder="Votre nom" required>

  <label for="email">E-mail*</label>
  <input type="email" id="email" name="email" placeholder="Votre email" required>

  <label for="phone">Téléphone</label>
  <input type="tel" id="phone" name="phone" placeholder="Votre téléphone">

  <label for="message">Commentaire</label>
  <textarea id="message" name="message" rows="5" placeholder="Votre message"></textarea>

  <button type="submit" class="button">Contactez-nous</button>
</form>


  <div class="contact-info">
    <p>Livraison gratuite à partir de 70€</p>
    <p>Paiement sécurisé</p>
  </div>
</section>

<footer>
  © 2026 Eclaboucles
</footer>

<script>
// --- Panier global avec LocalStorage ---
const navCartCount = document.getElementById("nav-cart-count");
const cartItemsDiv = document.getElementById("cart-items");
const cartTotalEl = document.getElementById("cart-total");
const openCartBtn = document.getElementById("open-cart");
const closeCartBtn = document.getElementById("close-cart");
const clearCartBtn = document.getElementById("clear-cart");
const cartModal = document.getElementById("cart-modal");

// Récupérer le panier depuis LocalStorage ou créer un tableau vide
function getCart(){
  return JSON.parse(localStorage.getItem("cart")) || [];
}

// Sauvegarder le panier dans LocalStorage
function saveCart(cart){
  localStorage.setItem("cart", JSON.stringify(cart));
}

// Affichage du panier
function renderCart(){
  const cart = getCart();
  cartItemsDiv.innerHTML = "";
  if(cart.length === 0){
    cartItemsDiv.innerHTML = "<p>Votre panier est vide.</p>";
    cartTotalEl.textContent = "0";
    navCartCount.textContent = "0";
    return;
  }

  const ul = document.createElement("ul");
  let total = 0;

  cart.forEach((item,index)=>{
    const li = document.createElement("li");
    li.innerHTML = `
      <strong>${item.name}</strong><br>
      ${item.description}<br>
      Prix: ${item.price.toFixed(2)} €<br>
      Quantité: <input type="number" min="1" value="${item.quantity}" data-index="${index}" class="item-qty" style="width:50px;">
      <button data-index="${index}" class="remove-item">Supprimer</button>
    `;
    ul.appendChild(li);
    total += item.price * item.quantity;
  });

  cartItemsDiv.appendChild(ul);
  cartTotalEl.textContent = total.toFixed(2);
  navCartCount.textContent = cart.reduce((sum,i)=>sum+i.quantity,0);

  // Changement quantité
  document.querySelectorAll(".item-qty").forEach(input=>{
    input.addEventListener("change", e=>{
      const idx = e.target.dataset.index;
      const val = parseInt(e.target.value);
      const cart = getCart();
      if(val < 1){ e.target.value = 1; return; }
      cart[idx].quantity = val;
      saveCart(cart);
      renderCart();
    });
  });

  // Supprimer un article
  document.querySelectorAll(".remove-item").forEach(btn=>{
    btn.addEventListener("click", e=>{
      const idx = e.target.dataset.index;
      const cart = getCart();
      cart.splice(idx,1);
      saveCart(cart);
      renderCart();
    });
  });
}

// Ajouter au panier
document.querySelectorAll(".add-to-cart").forEach(btn=>{
  btn.addEventListener("click", ()=>{
    const cart = getCart(); // toujours lire le panier à jour
    const product = {
      id: btn.dataset.id,
      name: btn.dataset.name,
      description: btn.dataset.description,
      price: parseFloat(btn.dataset.price),
      quantity:1
    };

    const existing = cart.find(p=>p.id === product.id);
    if(existing){
      existing.quantity += 1;
    } else {
      cart.push(product);
    }

    saveCart(cart);
    renderCart();
    alert(`${product.name} ajouté au panier !`);
  });
});

// Ouvrir / fermer
openCartBtn.addEventListener("click", ()=> cartModal.style.display="block");
closeCartBtn.addEventListener("click", ()=> cartModal.style.display="none");

// Vider panier
clearCartBtn.addEventListener("click", ()=>{
  saveCart([]);
  renderCart();
});

// Afficher panier dès chargement
renderCart();
</script>

</body>
</html>
